<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Mobile Test - Zhejian Homepage</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            -webkit-tap-highlight-color: transparent;
        }
        
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 16px;
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .test-section {
            margin-bottom: 2rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #f093fb;
        }
        
        .test-button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            margin: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .test-button:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .test-button:active {
            transform: scale(0.95);
        }
        
        .status {
            padding: 0.5rem;
            border-radius: 4px;
            margin: 0.5rem 0;
            font-size: 0.9rem;
        }
        
        .status.success {
            background: rgba(76, 175, 80, 0.3);
            border: 1px solid rgba(76, 175, 80, 0.5);
        }
        
        .status.error {
            background: rgba(244, 67, 54, 0.3);
            border: 1px solid rgba(244, 67, 54, 0.5);
        }
        
        .status.info {
            background: rgba(33, 150, 243, 0.3);
            border: 1px solid rgba(33, 150, 243, 0.5);
        }
        
        .device-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .info-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.8rem;
            border-radius: 6px;
            font-size: 0.9rem;
        }
        
        .info-label {
            font-weight: 600;
            color: #f093fb;
        }
        
        .gesture-area {
            height: 100px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 1rem 0;
            border: 2px dashed rgba(255, 255, 255, 0.3);
        }
        
        @media (max-width: 480px) {
            .test-container {
                padding: 1rem;
            }
            
            .test-button {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ“± ç§»åŠ¨ç«¯åŠŸèƒ½æµ‹è¯•</h1>
        
        <!-- è®¾å¤‡ä¿¡æ¯æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ” è®¾å¤‡ä¿¡æ¯</h3>
            <div class="device-info" id="deviceInfo">
                <!-- è®¾å¤‡ä¿¡æ¯å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
        </div>
        
        <!-- è§¦æ‘¸åŠŸèƒ½æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ‘† è§¦æ‘¸åŠŸèƒ½æµ‹è¯•</h3>
            <button class="test-button" onclick="testTouch()">æµ‹è¯•è§¦æ‘¸åé¦ˆ</button>
            <button class="test-button" onclick="testVibration()">æµ‹è¯•æŒ¯åŠ¨åé¦ˆ</button>
            <button class="test-button" onclick="testLongPress()">æµ‹è¯•é•¿æŒ‰</button>
            <div id="touchStatus"></div>
        </div>
        
        <!-- æ‰‹åŠ¿æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ¤ æ‰‹åŠ¿æµ‹è¯•</h3>
            <div class="gesture-area" id="gestureArea">
                åœ¨æ­¤åŒºåŸŸè¿›è¡Œæ‰‹åŠ¿æ“ä½œ
            </div>
            <div id="gestureStatus"></div>
        </div>
        
        <!-- PWA åŠŸèƒ½æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ“± PWA åŠŸèƒ½æµ‹è¯•</h3>
            <button class="test-button" onclick="testPWA()">æµ‹è¯• PWA å®‰è£…</button>
            <button class="test-button" onclick="testOffline()">æµ‹è¯•ç¦»çº¿åŠŸèƒ½</button>
            <button class="test-button" onclick="testNotifications()">æµ‹è¯•é€šçŸ¥</button>
            <div id="pwaStatus"></div>
        </div>
        
        <!-- æ€§èƒ½æµ‹è¯• -->
        <div class="test-section">
            <h3>âš¡ æ€§èƒ½æµ‹è¯•</h3>
            <button class="test-button" onclick="testPerformance()">æµ‹è¯•æ€§èƒ½</button>
            <button class="test-button" onclick="testMemory()">æµ‹è¯•å†…å­˜ä½¿ç”¨</button>
            <button class="test-button" onclick="testBattery()">æµ‹è¯•ç”µæ± ä¿¡æ¯</button>
            <div id="performanceStatus"></div>
        </div>
        
        <!-- æµè§ˆå™¨åŠŸèƒ½æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸŒ æµè§ˆå™¨åŠŸèƒ½æµ‹è¯•</h3>
            <button class="test-button" onclick="testFullscreen()">æµ‹è¯•å…¨å±</button>
            <button class="test-button" onclick="testOrientation()">æµ‹è¯•å±å¹•æ–¹å‘</button>
            <button class="test-button" onclick="testViewport()">æµ‹è¯•è§†å£</button>
            <div id="browserStatus"></div>
        </div>
    </div>

    <script>
        // è®¾å¤‡ä¿¡æ¯æ£€æµ‹
        function detectDeviceInfo() {
            const deviceInfo = document.getElementById('deviceInfo');
            const info = [
                { label: 'ç”¨æˆ·ä»£ç†', value: navigator.userAgent },
                { label: 'å¹³å°', value: navigator.platform },
                { label: 'è¯­è¨€', value: navigator.language },
                { label: 'å±å¹•å°ºå¯¸', value: `${screen.width}x${screen.height}` },
                { label: 'è§†å£å°ºå¯¸', value: `${window.innerWidth}x${window.innerHeight}` },
                { label: 'è®¾å¤‡åƒç´ æ¯”', value: window.devicePixelRatio },
                { label: 'è§¦æ‘¸æ”¯æŒ', value: 'ontouchstart' in window ? 'æ˜¯' : 'å¦' },
                { label: 'æœ€å¤§è§¦æ‘¸ç‚¹', value: navigator.maxTouchPoints || 'ä¸æ”¯æŒ' },
                { label: 'æŒ¯åŠ¨æ”¯æŒ', value: 'vibrate' in navigator ? 'æ˜¯' : 'å¦' },
                { label: 'PWA æ”¯æŒ', value: 'serviceWorker' in navigator ? 'æ˜¯' : 'å¦' },
                { label: 'é€šçŸ¥æ”¯æŒ', value: 'Notification' in window ? 'æ˜¯' : 'å¦' },
                { label: 'å…¨å±æ”¯æŒ', value: document.fullscreenEnabled ? 'æ˜¯' : 'å¦' }
            ];
            
            deviceInfo.innerHTML = info.map(item => `
                <div class="info-item">
                    <div class="info-label">${item.label}:</div>
                    <div>${item.value}</div>
                </div>
            `).join('');
        }
        
        // è§¦æ‘¸åŠŸèƒ½æµ‹è¯•
        function testTouch() {
            const status = document.getElementById('touchStatus');
            status.innerHTML = '<div class="status success">âœ… è§¦æ‘¸åé¦ˆæµ‹è¯•æˆåŠŸ</div>';
            
            // æ·»åŠ è§¦æ‘¸åé¦ˆ
            const button = event.target;
            button.style.transform = 'scale(0.95)';
            setTimeout(() => {
                button.style.transform = 'scale(1)';
            }, 150);
        }
        
        function testVibration() {
            const status = document.getElementById('touchStatus');
            if ('vibrate' in navigator) {
                navigator.vibrate(100);
                status.innerHTML = '<div class="status success">âœ… æŒ¯åŠ¨åé¦ˆæµ‹è¯•æˆåŠŸ</div>';
            } else {
                status.innerHTML = '<div class="status error">âŒ è®¾å¤‡ä¸æ”¯æŒæŒ¯åŠ¨</div>';
            }
        }
        
        function testLongPress() {
            const status = document.getElementById('touchStatus');
            status.innerHTML = '<div class="status info">â³ é•¿æŒ‰æµ‹è¯• - è¯·é•¿æŒ‰æŒ‰é’® 2 ç§’</div>';
            
            let pressTimer;
            const button = event.target;
            
            button.addEventListener('touchstart', function() {
                pressTimer = setTimeout(() => {
                    status.innerHTML = '<div class="status success">âœ… é•¿æŒ‰æµ‹è¯•æˆåŠŸ</div>';
                }, 2000);
            });
            
            button.addEventListener('touchend', function() {
                clearTimeout(pressTimer);
            });
        }
        
        // æ‰‹åŠ¿æµ‹è¯•
        function initGestureTest() {
            const gestureArea = document.getElementById('gestureArea');
            const status = document.getElementById('gestureStatus');
            
            let startX, startY, startTime;
            
            gestureArea.addEventListener('touchstart', function(e) {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
                startTime = Date.now();
            });
            
            gestureArea.addEventListener('touchend', function(e) {
                const endX = e.changedTouches[0].clientX;
                const endY = e.changedTouches[0].clientY;
                const endTime = Date.now();
                
                const deltaX = endX - startX;
                const deltaY = endY - startY;
                const deltaTime = endTime - startTime;
                
                if (Math.abs(deltaY) > 50 && deltaTime < 500) {
                    if (deltaY > 0) {
                        status.innerHTML = '<div class="status success">âœ… ä¸‹æ»‘æ‰‹åŠ¿æ£€æµ‹æˆåŠŸ</div>';
                    } else {
                        status.innerHTML = '<div class="status success">âœ… ä¸Šæ»‘æ‰‹åŠ¿æ£€æµ‹æˆåŠŸ</div>';
                    }
                } else if (Math.abs(deltaX) > 50 && deltaTime < 500) {
                    if (deltaX > 0) {
                        status.innerHTML = '<div class="status success">âœ… å³æ»‘æ‰‹åŠ¿æ£€æµ‹æˆåŠŸ</div>';
                    } else {
                        status.innerHTML = '<div class="status success">âœ… å·¦æ»‘æ‰‹åŠ¿æ£€æµ‹æˆåŠŸ</div>';
                    }
                }
            });
        }
        
        // PWA åŠŸèƒ½æµ‹è¯•
        function testPWA() {
            const status = document.getElementById('pwaStatus');
            if ('serviceWorker' in navigator) {
                status.innerHTML = '<div class="status success">âœ… PWA æ”¯æŒæ­£å¸¸</div>';
            } else {
                status.innerHTML = '<div class="status error">âŒ æµè§ˆå™¨ä¸æ”¯æŒ PWA</div>';
            }
        }
        
        function testOffline() {
            const status = document.getElementById('pwaStatus');
            if (navigator.onLine) {
                status.innerHTML = '<div class="status info">ğŸŒ å½“å‰åœ¨çº¿</div>';
            } else {
                status.innerHTML = '<div class="status info">ğŸ“´ å½“å‰ç¦»çº¿</div>';
            }
        }
        
        function testNotifications() {
            const status = document.getElementById('pwaStatus');
            if ('Notification' in window) {
                if (Notification.permission === 'granted') {
                    status.innerHTML = '<div class="status success">âœ… é€šçŸ¥æƒé™å·²æˆäºˆ</div>';
                } else if (Notification.permission === 'denied') {
                    status.innerHTML = '<div class="status error">âŒ é€šçŸ¥æƒé™è¢«æ‹’ç»</div>';
                } else {
                    Notification.requestPermission().then(permission => {
                        if (permission === 'granted') {
                            status.innerHTML = '<div class="status success">âœ… é€šçŸ¥æƒé™å·²æˆäºˆ</div>';
                        } else {
                            status.innerHTML = '<div class="status error">âŒ é€šçŸ¥æƒé™è¢«æ‹’ç»</div>';
                        }
                    });
                }
            } else {
                status.innerHTML = '<div class="status error">âŒ æµè§ˆå™¨ä¸æ”¯æŒé€šçŸ¥</div>';
            }
        }
        
        // æ€§èƒ½æµ‹è¯•
        function testPerformance() {
            const status = document.getElementById('performanceStatus');
            if ('performance' in window) {
                const perfData = performance.getEntriesByType('navigation')[0];
                const loadTime = perfData.loadEventEnd - perfData.loadEventStart;
                status.innerHTML = `<div class="status success">âœ… é¡µé¢åŠ è½½æ—¶é—´: ${loadTime.toFixed(2)}ms</div>`;
            } else {
                status.innerHTML = '<div class="status error">âŒ æ— æ³•è·å–æ€§èƒ½æ•°æ®</div>';
            }
        }
        
        function testMemory() {
            const status = document.getElementById('performanceStatus');
            if ('memory' in performance) {
                const memory = performance.memory;
                const usedMB = (memory.usedJSHeapSize / 1024 / 1024).toFixed(2);
                const totalMB = (memory.totalJSHeapSize / 1024 / 1024).toFixed(2);
                status.innerHTML = `<div class="status info">ğŸ’¾ å†…å­˜ä½¿ç”¨: ${usedMB}MB / ${totalMB}MB</div>`;
            } else {
                status.innerHTML = '<div class="status info">ğŸ’¾ æ— æ³•è·å–å†…å­˜ä¿¡æ¯</div>';
            }
        }
        
        function testBattery() {
            const status = document.getElementById('performanceStatus');
            if ('getBattery' in navigator) {
                navigator.getBattery().then(battery => {
                    const level = (battery.level * 100).toFixed(1);
                    const charging = battery.charging ? 'å……ç”µä¸­' : 'ä½¿ç”¨ç”µæ± ';
                    status.innerHTML = `<div class="status info">ğŸ”‹ ç”µæ± : ${level}% (${charging})</div>`;
                });
            } else {
                status.innerHTML = '<div class="status info">ğŸ”‹ æ— æ³•è·å–ç”µæ± ä¿¡æ¯</div>';
            }
        }
        
        // æµè§ˆå™¨åŠŸèƒ½æµ‹è¯•
        function testFullscreen() {
            const status = document.getElementById('browserStatus');
            if (document.fullscreenEnabled) {
                status.innerHTML = '<div class="status success">âœ… å…¨å±åŠŸèƒ½æ”¯æŒ</div>';
            } else {
                status.innerHTML = '<div class="status error">âŒ å…¨å±åŠŸèƒ½ä¸æ”¯æŒ</div>';
            }
        }
        
        function testOrientation() {
            const status = document.getElementById('browserStatus');
            if ('orientation' in screen) {
                status.innerHTML = `<div class="status info">ğŸ“± å±å¹•æ–¹å‘: ${screen.orientation.type}</div>`;
            } else {
                status.innerHTML = '<div class="status info">ğŸ“± æ— æ³•è·å–å±å¹•æ–¹å‘</div>';
            }
        }
        
        function testViewport() {
            const status = document.getElementById('browserStatus');
            const vw = window.innerWidth;
            const vh = window.innerHeight;
            status.innerHTML = `<div class="status info">ğŸ“ è§†å£å°ºå¯¸: ${vw}x${vh}</div>`;
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            detectDeviceInfo();
            initGestureTest();
            
            // ç›‘å¬åœ¨çº¿çŠ¶æ€å˜åŒ–
            window.addEventListener('online', function() {
                console.log('è®¾å¤‡å·²è¿æ¥ç½‘ç»œ');
            });
            
            window.addEventListener('offline', function() {
                console.log('è®¾å¤‡å·²æ–­å¼€ç½‘ç»œ');
            });
            
            // ç›‘å¬å±å¹•æ–¹å‘å˜åŒ–
            if ('orientation' in screen) {
                screen.orientation.addEventListener('change', function() {
                    console.log('å±å¹•æ–¹å‘å·²æ”¹å˜:', screen.orientation.type);
                });
            }
        });
    </script>
</body>
</html> 